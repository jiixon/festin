Feature: 호출 대기 목록 조회 (스태프용)
  스태프가 호출된 대기 목록을 확인하는 기능 검증

  Background:
    Given 애플리케이션이 실행중이다
    And 테스트용 대학교 "서울대학교"가 존재한다
    And "서울대학교"에 정원 10명인 "치킨 부스" 부스가 존재한다

  Scenario: 호출된 대기 건이 없는 경우
    When 스태프가 "치킨 부스"의 호출 대기 목록을 조회한다
    Then 호출 대기 목록은 비어있다

  Scenario: 호출된 대기 건 1명 조회
    Given "user1"이 "치킨 부스"에 호출되었다 (3분 전)
    When 스태프가 "치킨 부스"의 호출 대기 목록을 조회한다
    Then 호출 대기 목록 크기는 1이다
    And 첫 번째 항목의 닉네임은 "user1"이다
    And 첫 번째 항목의 상태는 "CALLED"이다
    And 첫 번째 항목의 남은 시간은 약 120초이다

  Scenario: 호출된 대기 건 여러 명 조회 (시간 순 정렬)
    Given "user1"이 "치킨 부스"에 호출되었다 (5분 전)
    And "user2"가 "치킨 부스"에 호출되었다 (2분 전)
    And "user3"이 "치킨 부스"에 호출되었다 (1분 전)
    When 스태프가 "치킨 부스"의 호출 대기 목록을 조회한다
    Then 호출 대기 목록 크기는 3이다
    And 호출 목록은 시간 순으로 정렬되어 있다
    And 첫 번째 항목의 남은 시간은 0초이다
    And 세 번째 항목의 남은 시간은 약 240초이다

  Scenario: ENTERED 상태도 포함
    Given "user1"이 "치킨 부스"에 호출되었다 (3분 전)
    And "user2"가 "치킨 부스"에 입장했다
    When 스태프가 "치킨 부스"의 호출 대기 목록을 조회한다
    Then 호출 대기 목록 크기는 2이다
    And 첫 번째 항목의 상태는 "ENTERED"이다
    And 첫 번째 항목의 남은 시간은 없다
    And 첫 번째 항목의 입장 시간은 존재한다
    And 두 번째 항목의 상태는 "CALLED"이다

  Scenario: COMPLETED 상태는 제외
    Given "user1"이 "치킨 부스"에 호출되었다 (3분 전)
    And "user3"이 "치킨 부스"에서 체험을 완료했다
    When 스태프가 "치킨 부스"의 호출 대기 목록을 조회한다
    Then 호출 대기 목록 크기는 1이다
    And 첫 번째 항목의 닉네임은 "user1"이다
